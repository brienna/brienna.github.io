<!DOCTYPE html>
<html lang="en">

	<head>
		<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1" />


	<title>Addressing a unchecked cast warning · briennakh</title>


<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@briennakh" />
<meta name="twitter:title" content="Addressing a unchecked cast warning" />
<meta name="twitter:description" content="I wrote some code, so that I could, among other things, read a serialized ArrayList&lt;Vehicle&gt; from an ObjectInputStream, in, into orders:">

<meta name="description" content="I wrote some code, so that I could, among other things, read a serialized ArrayList&lt;Vehicle&gt; from an ObjectInputStream, in, into orders:">


	<meta name="google-site-verification" content="epFgX0s_0RM3CdjwFcsewfXzPov2g8s9ZBOLyaIUH-o">


<link rel="icon" href="/assets/favicon.png">
<link rel="apple-touch-icon" href="/assets/touch-icon.png">
<link rel="stylesheet" href="/assets/core.css">
<link rel="canonical" href="/notes/how-to-address-unchecked-cast-warning">
<link rel="alternate" type="application/atom+xml" title="briennakh" href="/feed.xml" />




<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>


	</head>

	<body>

		<aside class="logo">

	

	<a href="/">
		<img src="http://www.gravatar.com/avatar/a1874522e5d9bff764e068c928f0e3c0.png?s=80" class="gravatar">
	</a>
	<span class="logo-prompt">Back to Home</span>

</aside>


		<main>
			<article>

	<div class="center">
		<h1>Addressing a unchecked cast warning</h1>
		<time>December 28, 2017</time>
	</div>

	<div class="divider"></div>

	<p>I wrote some code, so that I could, among other things, read a serialized <code class="highlighter-rouge">ArrayList&lt;Vehicle&gt;</code> from an <code class="highlighter-rouge">ObjectInputStream</code>, <code class="highlighter-rouge">in</code>, into <code class="highlighter-rouge">orders</code>:</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">orders</span> <span class="o">=</span> <span class="o">(</span><span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Vehicle</span><span class="o">&gt;)</span> <span class="n">in</span><span class="o">.</span><span class="na">readObject</span><span class="o">();</span>
</code></pre>
</div>

<p>But the Java compiler gives an unchecked cast warning:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>MacBook:Homework Brienna$ javac Orders.java -Xlint:unchecked
Orders.java:152: warning: [unchecked] unchecked cast
                    orders = (ArrayList&lt;Vehicle&gt;) in.readObject();
                                                                ^
  required: ArrayList&lt;Vehicle&gt;
  found:    Object
1 warning
</code></pre>
</div>

<p>The problem is that a cast is a runtime check, but a generic type (the <code class="highlighter-rouge">&lt;Vehicle&gt;</code> part of <code class="highlighter-rouge">ArrayList&lt;Vehicle&gt;</code>) gets erased during compilation and is not available at runtime for the cast. In fact, at runtime there is no difference between an <code class="highlighter-rouge">ArrayList&lt;Vehicle&gt;</code> and an <code class="highlighter-rouge">ArrayList&lt;AnythingElse&gt;</code>. Because of this type erasure, I can’t check that I actually have an <code class="highlighter-rouge">ArrayList&lt;Vehicle&gt;</code> when I am casting. So I need to do the check myself by looping through the ArrayList and casting each element individually:</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">ArrayList</span><span class="o">&lt;?&gt;</span> <span class="n">ar</span> <span class="o">=</span> <span class="o">(</span><span class="n">ArrayList</span><span class="o">&lt;?&gt;)</span> <span class="n">in</span><span class="o">.</span><span class="na">readObject</span><span class="o">();</span>
<span class="k">for</span> <span class="o">(</span><span class="n">Object</span> <span class="n">x</span> <span class="o">:</span> <span class="n">ar</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">orders</span><span class="o">.</span><span class="na">add</span><span class="o">((</span><span class="n">Vehicle</span><span class="o">)</span> <span class="n">x</span><span class="o">);</span>
<span class="o">}</span>
</code></pre>
</div>

<p>Note: Since I have control over the objects which were originally serialized, I could avoid the loop by using an array instead of an ArrayList. Array types are always a safe cast (if they don’t have a generic type themselves).</p>

<p>More info about type erasure can be found <a href="https://docs.oracle.com/javase/tutorial/java/generics/erasure.html">here</a> and <a href="https://stackoverflow.com/questions/339699/java-generics-type-erasure-when-and-what-happens">here</a>.</p>

<p>The full code for this assignment can be found <a href="https://github.com/briennakh/ISTE200/tree/master/Day%206/Homework">here</a>.</p>


    <!--DISQUS-->
    
    <div id="disqus_thread"></div>
    <script>
        var disqus_config = function () {
        this.page.url = "http://briennakh.github.io/notes/how-to-address-unchecked-cast-warning";
        this.page.identifier = "/notes/how-to-address-unchecked-cast-warning"; 
        };
        
        (function() { // DON'T EDIT BELOW THIS LINE
        var d = document, s = d.createElement('script');
        s.src = 'https://briennakh-github-io.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>                          
    

</article>




<div class="page-navigation">
	
		<a class="home" href="/" title="Back to Homepage">Home</a>
  
		<span> &middot; </span>
    <a class="prev" href="/notes/File-I-O-basics" title="PREV: Java I/O notes">&gt;&gt;</a>
  
</div>

		</main>

		<div class="footer">
  <span class="block">&lt;/&gt; <a href="http://github.com/heiswayi/the-plain" title="a minimalist Jekyll theme for personal blog">The Plain theme</a> by <a href="http://heiswayi.github.io">Heiswayi Nrird</a>.</span>
  <span class="block">&copy; 2017 Brienna Herold</span>
</div>


	</body>

</html>
